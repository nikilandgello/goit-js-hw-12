{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport let perPage = 15;\n\nconst KEY_API = '47345355-bb5adb35ee772e90f4db69f75';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(qValue, page) {\n    const params = new URLSearchParams({\n        key: KEY_API,\n        q: qValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n    });\n\n    const response = await axios.get(`?${params}`);\n    \n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function renderGallery(data, tagInsertTo) {\n    tagInsertTo.insertAdjacentHTML('beforeend', createMarkup(data));\n\n    lightbox.refresh();\n};\n\nfunction createMarkup(arr) {\n    return arr.map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads }) => {\n        return `<li class = 'list-item'>\n            <a class='gallery-link' href='${largeImageURL}'>\n                <img\n                    class = 'gallery-image'\n                    src = '${webformatURL}'\n                    alt =  '${tags}'>\n                <ul class = 'description-list'>\n                    <li class = 'description-item'>\n                        <h3>Likes</h3>\n                        <p>${likes}</p>\n                    </li>\n                    <li class = 'description-item'>\n                        <h3>Views</h3>\n                        <p>${views}</p>\n                    </li>\n                    <li class = 'description-item'>\n                        <h3>Comments</h3>\n                        <p>${comments}</p>\n                    </li>\n                    <li class = 'description-item'>\n                        <h3>Downloads</h3>\n                        <p>${downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>`\n    }).join('');\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport { perPage } from './js/pixabay-api';\n\nconst form = document.querySelector('.search-form');\nconst inputSearch = document.querySelector('[name=\"search\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-images');\n\nform.addEventListener('input', savetoLocalStorage);\nform.addEventListener('submit', searchImages);\nloadMoreBtn.addEventListener('click', loadeMoreImages);\n\nhidenMoreLoaderBt();\n\n//localStorage\nconst localKey = 'input-name-image';\nconst localData = JSON.parse(localStorage.getItem(localKey));\n\nconst formData = {\n    search: '',\n};\n\nif (localData) {\n    inputSearch.value = localData.search;\n    formData.search = localData.search;\n};\n\nfunction savetoLocalStorage(e) {\n    formData.search = e.target.value.trim();\n\n    localStorage.setItem(localKey, JSON.stringify(formData));\n};\n\n//Search images\nlet galleryData = {\n    totalHits: 0,\n};\nlet page = 1;\n\nasync function searchImages (e) {\n    e.preventDefault();\n        \n    gallery.innerHTML = '';\n    loaderShow();\n    hidenMoreLoaderBt();\n\n    const input = e.target.elements.search.value.trim();\n\n    if (!input) {\n        showMessage(IZI_MESSEGES.info.type, IZI_MESSEGES.info.message);\n\n        gallery.innerHTML = '';\n        loaderHiden();\n\n        return;\n    };\n\n    try {\n        page = 1;\n        const response = await getImages(formData.search, page);\n\n        if (response.hits.length === 0) {\n            showMessage(IZI_MESSEGES.warningNoSearchImages.type, IZI_MESSEGES.warningNoSearchImages.message);\n\n            gallery.innerHTML = '';\n            loaderHiden();\n            hidenMoreLoaderBt();\n            \n            return;\n        }\n\n        renderGallery(response.hits, gallery);\n        galleryData.totalHits = response.totalHits;\n\n        if (response.hits.length < perPage) {\n            hidenMoreLoaderBt();\n        } else {\n            showMoreLoaderBtn();\n        };\n\n        loaderHiden();\n\n    } catch (error) {\n        console.error('Error:', error.message);\n\n        loaderHiden();\n        hidenMoreLoaderBt();\n\n        return;\n    };\n};\n\n\n//Loade new images button\nasync function loadeMoreImages () {\n    page += 1;\n    loaderShow();\n\n    try {\n        const response = await getImages(formData.search, page);\n        const imagesLoaded = (page - 1) * perPage + response.hits.length;\n\n        if (imagesLoaded >= galleryData.totalHits) {\n            renderGallery(response.hits, gallery);\n\n            showMessage(IZI_MESSEGES.warningNoImagesBtn.type, IZI_MESSEGES.warningNoImagesBtn.message);\n\n            loaderHiden();\n            hidenMoreLoaderBt();\n            scrollNewImg();\n\n        } else {\n            renderGallery(response.hits, gallery);\n\n            showMoreLoaderBtn();\n            loaderHiden();\n\n            scrollNewImg();\n        }\n    } catch (error) {\n        showMessage(IZI_MESSEGES.error.type, IZI_MESSEGES.error.message);\n\n        loaderHiden();\n        hidenMoreLoaderBt();\n    } finally {\n        loaderHiden();\n    };\n};\n\n\n// iziToast message\nconst IZI_MESSEGES = {\n    success: {\n        type: 'success',\n        message: 'Request completed successfully'\n    },\n    info: {\n        type: 'info',\n        message: 'The field must be filled',\n    },\n    warningNoSearchImages: {\n        type: 'warning',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    },\n    warningNoImagesBtn: {\n        type: 'warning',\n        message: \"We're sorry, but you've reached the end of search results.\"\n    },\n    error: {\n        type: 'error',\n        message: 'Sorry, but something went wrong. Please try again later!',\n    },\n};\n\n\nfunction showMessage(type, message) {\n    const bgColor = {\n        success: 'rgb(0, 255, 128, 0.7)',\n        info: 'rgb(76, 153, 255, 0.7)',\n        warning: 'rgb(255, 193, 7, 0.7)',\n        error: 'rgb(255, 76, 76, 0.7)',\n    };\n\n    iziToast.show({\n        message,\n        messageColor: 'white',\n        position: \"topRight\",\n        backgroundColor: bgColor[type],\n    });\n};\n\n//show and hiden loader or Load more btn \nfunction loaderShow() {\n    let loader = document.querySelector('.loader');\n    if(!loader){\n        const newLoader = document.createElement('div');\n        newLoader.className = 'loader';\n        gallery.insertAdjacentElement('beforeend', newLoader);\n    };\n\n    return;\n};\n\nfunction loaderHiden() {\n    const loader = document.querySelector('.loader');\n    \n    if (loader) {\n        loader.remove();\n    };\n\n    return;\n};\n\nfunction showMoreLoaderBtn() {\n    loadMoreBtn.style.display = 'block';\n};\n\nfunction hidenMoreLoaderBt() {\n    loadMoreBtn.style.display = 'none';\n};\n\nfunction scrollNewImg() {\n    const card = document.querySelector('.list-item')\n    const imgRect = card.getBoundingClientRect();  \n\n    window.scrollBy({\n        top: imgRect.height * 2,\n        behavior: 'smooth'\n    });\n};"],"names":["perPage","KEY_API","axios","getImages","qValue","page","params","lightbox","SimpleLightbox","renderGallery","data","tagInsertTo","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","inputSearch","gallery","loadMoreBtn","savetoLocalStorage","searchImages","loadeMoreImages","hidenMoreLoaderBt","localKey","localData","formData","galleryData","loaderShow","showMessage","IZI_MESSEGES","loaderHiden","response","showMoreLoaderBtn","error","scrollNewImg","type","message","bgColor","iziToast","newLoader","loader","imgRect"],"mappings":"owBAEO,IAAIA,EAAU,GAErB,MAAMC,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAElB,eAAeC,EAAUC,EAAQC,EAAM,CAC1C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUL,CAClB,CAAK,EAID,OAFiB,MAAME,EAAM,IAAI,IAAII,CAAM,EAAE,GAE7B,IACpB,CClBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAAMC,EAAa,CAC7CA,EAAY,mBAAmB,YAAaC,EAAaF,CAAI,CAAC,EAE9DH,EAAS,QAAO,CACpB,CAEA,SAASK,EAAaC,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CACZ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,KACO;AAAA,4CAC6BL,CAAa;AAAA;AAAA;AAAA,6BAG5BD,CAAY;AAAA,8BACXE,CAAI;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,cAKjC,EAAE,KAAK,EAAE,CACd,CC3CA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,mBAAmB,EAE9DH,EAAK,iBAAiB,QAASI,CAAkB,EACjDJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CF,EAAY,iBAAiB,QAASG,CAAe,EAErDC,IAGA,MAAMC,EAAW,mBACXC,EAAY,KAAK,MAAM,aAAa,QAAQD,CAAQ,CAAC,EAErDE,EAAW,CACb,OAAQ,EACZ,EAEID,IACAR,EAAY,MAAQQ,EAAU,OAC9BC,EAAS,OAASD,EAAU,QAGhC,SAASL,EAAmB,EAAG,CAC3BM,EAAS,OAAS,EAAE,OAAO,MAAM,KAAI,EAErC,aAAa,QAAQF,EAAU,KAAK,UAAUE,CAAQ,CAAC,CAC3D,CAGA,IAAIC,EAAc,CACd,UAAW,CACf,EACI3B,EAAO,EAEX,eAAeqB,EAAc,EAAG,CAS5B,GARA,EAAE,eAAc,EAEhBH,EAAQ,UAAY,GACpBU,IACAL,IAII,CAFU,EAAE,OAAO,SAAS,OAAO,MAAM,OAEjC,CACRM,EAAYC,EAAa,KAAK,KAAMA,EAAa,KAAK,OAAO,EAE7DZ,EAAQ,UAAY,GACpBa,IAEA,MAER,CACI,GAAI,CACA/B,EAAO,EACP,MAAMgC,EAAW,MAAMlC,EAAU4B,EAAS,OAAQ1B,CAAI,EAEtD,GAAIgC,EAAS,KAAK,SAAW,EAAG,CAC5BH,EAAYC,EAAa,sBAAsB,KAAMA,EAAa,sBAAsB,OAAO,EAE/FZ,EAAQ,UAAY,GACpBa,IACAR,IAEA,MACH,CAEDnB,EAAc4B,EAAS,KAAMd,CAAO,EACpCS,EAAY,UAAYK,EAAS,UAE7BA,EAAS,KAAK,OAASrC,EACvB4B,IAEAU,IAGJF,GAEH,OAAQG,EAAO,CACZ,QAAQ,MAAM,SAAUA,EAAM,OAAO,EAErCH,IACAR,IAEA,MACR,CACA,CAIA,eAAeD,GAAmB,CAC9BtB,GAAQ,EACR4B,IAEA,GAAI,CACA,MAAMI,EAAW,MAAMlC,EAAU4B,EAAS,OAAQ1B,CAAI,GAChCA,EAAO,GAAKL,EAAUqC,EAAS,KAAK,QAEtCL,EAAY,WAC5BvB,EAAc4B,EAAS,KAAMd,CAAO,EAEpCW,EAAYC,EAAa,mBAAmB,KAAMA,EAAa,mBAAmB,OAAO,EAEzFC,IACAR,IACAY,MAGA/B,EAAc4B,EAAS,KAAMd,CAAO,EAEpCe,IACAF,IAEAI,IAEP,MAAe,CACZN,EAAYC,EAAa,MAAM,KAAMA,EAAa,MAAM,OAAO,EAE/DC,IACAR,GACR,QAAc,CACNQ,GACR,CACA,CAIA,MAAMD,EAAe,CACjB,QAAS,CACL,KAAM,UACN,QAAS,gCACZ,EACD,KAAM,CACF,KAAM,OACN,QAAS,0BACZ,EACD,sBAAuB,CACnB,KAAM,UACN,QAAS,0EACZ,EACD,mBAAoB,CAChB,KAAM,UACN,QAAS,4DACZ,EACD,MAAO,CACH,KAAM,QACN,QAAS,0DACZ,CACL,EAGA,SAASD,EAAYO,EAAMC,EAAS,CAChC,MAAMC,EAAU,CACZ,QAAS,wBACT,KAAM,yBACN,QAAS,wBACT,MAAO,uBACf,EAEIC,EAAS,KAAK,CACV,QAAAF,EACA,aAAc,QACd,SAAU,WACV,gBAAiBC,EAAQF,CAAI,CACrC,CAAK,CACL,CAGA,SAASR,GAAa,CAElB,GAAG,CADU,SAAS,cAAc,SAAS,EAClC,CACP,MAAMY,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,SACtBtB,EAAQ,sBAAsB,YAAasB,CAAS,CAE5D,CAEA,CAEA,SAAST,GAAc,CACnB,MAAMU,EAAS,SAAS,cAAc,SAAS,EAE3CA,GACAA,EAAO,OAAM,CAIrB,CAEA,SAASR,GAAoB,CACzBd,EAAY,MAAM,QAAU,OAChC,CAEA,SAASI,GAAoB,CACzBJ,EAAY,MAAM,QAAU,MAChC,CAEA,SAASgB,GAAe,CAEpB,MAAMO,EADO,SAAS,cAAc,YAAY,EAC3B,wBAErB,OAAO,SAAS,CACZ,IAAKA,EAAQ,OAAS,EACtB,SAAU,QAClB,CAAK,CACL"}